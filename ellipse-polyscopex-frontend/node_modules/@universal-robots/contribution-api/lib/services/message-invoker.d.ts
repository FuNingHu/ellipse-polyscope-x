import { Observable } from 'rxjs';
export declare const UNSUBSCRIBE_MESSAGE_TYPE = "ur.web.message.unsubscribeUpdates";
/**
 * Options for creating a UREventTarget
 * @param name For manually setting the name of the event target. Will take precedence if provided.
 * @param values String values that will be hashed to create the event target name.
 * @param salt Salt to add to the event target name. Will be appended.
 */
type UREventTargetOptions = {
    name?: string;
    values?: Array<string>;
    salt?: string;
};
/**
 *
 */
export declare class UREventTarget extends EventTarget {
    name?: string;
    /**
     *
     * @param name
     */
    constructor(options?: UREventTargetOptions);
}
/**
 * An interface representing the ability to post messages
 */
export interface WorkerScopeInterface extends EventTarget {
    name?: string;
    postMessage(message: unknown, transfer?: Transferable[]): void;
}
/**
 * returns true if the item is a worker type
 * @param item
 */
export declare function isWorkerScope(item: EventTarget): item is WorkerScopeInterface;
/**
 * Abstract interface for communication within PSX
 *
 * This class is an internal implementation detail used by higher-level contribution APIs.
 */
export declare abstract class CommunicationChannel {
    abstract request<T>(type: string, data: any): Promise<T>;
    /**
     * returns an observable that will emit any messages replied to the specified message
     *
     * @param type The type of message being sent
     * @param data The message data
     */
    abstract requestObserve<T>(type: string, data: any): Observable<T>;
    private readonly requestResponders;
    private readonly observerResponders;
    /**
     *
     */
    private triggerRequestResponse;
    /**
     *
     */
    private triggerObserverResponse;
    /**
     *
     */
    handleMessage(event: MessageEvent): void;
    /**
     *
     */
    requestInternal<T>(sender: any, type: string, name?: string, data?: any): Promise<T>;
    /**
     *
     */
    requestObserveInternal<T>(sender: any, finalizeFunc: any, type: string, data?: any): Observable<T>;
    /**
     *
     */
    protected unsubscribeFinalized(id: string): void;
}
/**
 * Communication implementation for workers in PSX
 *
 * This class is an internal implementation detail used by higher-level contribution APIs.
 */
export declare class WorkerCommunicationChannel extends CommunicationChannel {
    readonly worker: WorkerScopeInterface;
    portToMainThread: MessagePort;
    messageChannel: MessageChannel;
    id: string;
    /**
     *
     */
    constructor(worker: WorkerScopeInterface);
    /**
     *
     */
    request<T>(type: string, data?: any): Promise<T>;
    /**
     *
     */
    private dispatchWorkerEvent;
    /**
     *
     */
    private unsubscribeOnFinalized;
    /**
     * returns an observable that will emit any messages replied to the specified message
     *
     * @param type The type of message being sent
     * @param data The message data
     */
    requestObserve<T>(type: string, data?: any): Observable<T>;
}
/**
 * Communication implementation for presenters in PSX
 *
 * This class is an internal implementation detail used by higher-level contribution APIs.
 */
export declare class EventTargetCommunicationChannel extends CommunicationChannel {
    private readonly eventTarget;
    /**
     *
     */
    constructor(eventTarget: EventTarget);
    /**
     *
     */
    request<T>(type: string, data?: any): Promise<T>;
    /**
     *
     */
    private dispatchTargetEvent;
    /**
     *
     */
    private unsubscribeOnFinalized;
    /**
     * returns an observable that will emit any messages replied to the specified message
     *
     * @param type The type of message being sent
     * @param data The message data
     */
    requestObserve<T>(type: string, data?: any): Observable<T>;
}
/**
 * And event target or communication channel
 */
export type EventTargetOrCommChannel = UREventTarget | CommunicationChannel;
/**
 * returns true if the item is a CommunicationChannel type
 * @param item
 */
export declare function isCommunicationChannel(item: EventTargetOrCommChannel): item is CommunicationChannel;
/**
 * Creates a WorkerCommunicationChannel
 * @param target
 */
export declare function createWorkerCommChannel(target: EventTargetOrCommChannel): CommunicationChannel;
/**
 * Creates a EventTargetCommunicationChannel
 * @param target
 */
export declare function createEventTargetCommChannel(target: EventTargetOrCommChannel): CommunicationChannel;
/**
 * Base class for invoking messages
 */
export declare abstract class MessageInvokerService {
    private readonly messageBase;
    readonly eventTarget: EventTargetOrCommChannel;
    communicationChannel: CommunicationChannel;
    /**
     * @constructor
     * @param messageBase
     * @param eventTarget
     */
    protected constructor(messageBase: string, eventTarget: EventTargetOrCommChannel);
    /**
     * returns a reply promise for the requested message
     *
     * @param type The type of message being sent
     * @param data The message data
     */
    request<T>(type: string, data?: any): Promise<T>;
    /**
     * returns an observable that will emit any messages replied to the requested message
     *
     * @param type The type of message being sent
     * @param data The message data
     */
    requestObserve<T>(type: string, data?: any): Observable<T>;
    /**
     * returns a reply promise to the specified message
     *
     * @param type The type of message being sent
     * @param data The message data
     */
    postAndAwait<T>(type: string, data?: any): Promise<T>;
    /**
     * returns an observable that will emit any messages replied to the specified message
     *
     * @param type The type of message being sent
     * @param data The message data
     */
    postAndObserve<T>(type: string, data?: any): Observable<T>;
}
export {};
